<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws"
    xmlns:jaxrs="http://cxf.apache.org/jaxrs" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:http="http://cxf.apache.org/transports/http/configuration"
    xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"
    xmlns:sec="http://cxf.apache.org/configuration/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd   
      http://cxf.apache.org/jaxws
    http://cxf.apache.org/schemas/jaxws.xsd
    http://cxf.apache.org/jaxrs
    http://cxf.apache.org/schemas/jaxrs.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://cxf.apache.org/transports/http/configuration        
    http://cxf.apache.org/schemas/configuration/http-conf.xsd
    http://cxf.apache.org/transports/http-jetty/configuration   
    http://cxf.apache.org/schemas/configuration/http-jetty.xsd
    http://cxf.apache.org/configuration/security                
    http://cxf.apache.org/schemas/configuration/security.xsd">

    <context:property-placeholder />

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
    <import resource="file:///${edex.home}/conf/spring/edex-db.xml" />
    <import resource="classpath:res/spring/edex-security.xml" />
    <import resource="classpath:res/spring/eventbus-common.xml" />
    <import resource="classpath:res/spring/request-service-common.xml" />
    <import resource="classpath:res/spring/ebxml.xml" />
    <import resource="classpath:res/spring/ebxml-validator-plugins.xml" />
    <import resource="classpath:res/spring/ebxml-querytypes.xml" />
    <import resource="classpath:res/spring/ebxml-registry-dao.xml" />
    <import resource="classpath:res/spring/ebxml-subscription.xml" />
    <import resource="classpath:res/spring/ebxml-constants.xml" />
    <import resource="classpath:res/spring/ebxml-thrift-client.xml" />
    <import resource="classpath:res/spring/ebxml-xacml.xml" />
    <import resource="classpath:res/spring/ebxml-impl.xml" />
    <import resource="classpath*:res/spring/ebxml-customQueryPlugin.xml" />
    <import resource="classpath:res/spring/ebxml-webservices.xml" />
    <import resource="classpath:res/spring/utility-common.xml" />
    <import resource="classpath*:res/spring/webservices.xml" />
    
    <bean id="serializationUtil" class="com.raytheon.uf.common.serialization.SerializationUtil" />

    <bean id="QueryServiceWrapper"
        class="com.raytheon.uf.edex.registry.ebxml.services.query.QueryManagerImplWrapper">
        <constructor-arg ref="queryServiceImpl" />
    </bean>
    <bean id="NotificationListenerServiceWrapper"
        class="com.raytheon.uf.edex.registry.ebxml.services.notification.NotificationListenerImplWrapper">
        <constructor-arg ref="notificationServiceImpl" />
    </bean>
    <bean id="LifecycleManagerServiceWrapper"
        class="com.raytheon.uf.edex.registry.ebxml.services.lifecycle.LifecycleManagerImplWrapper">
        <constructor-arg ref="lcmServiceImpl" />
    </bean>
    <bean id="ValidatorServiceWrapper"
        class="com.raytheon.uf.edex.registry.ebxml.services.validator.ValidatorImplWrapper">
        <constructor-arg ref="validatorServiceImpl" />
    </bean>
    <bean id="CatalogerServiceWrapper"
        class="com.raytheon.uf.edex.registry.ebxml.services.cataloger.CatalogerImplWrapper">
        <constructor-arg ref="catalogerServiceImpl" />
    </bean>

    <!-- SOAP Service definitions -->
    <jaxws:server id="QueryService" address="/queryManager">
        <jaxws:serviceBean>
            <ref bean="QueryServiceWrapper" />
        </jaxws:serviceBean>
        <jaxws:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxws:inInterceptors>
        <jaxws:outInterceptors>
            <ref bean="securityOutInterceptor" />
        </jaxws:outInterceptors>
    </jaxws:server>
    <jaxws:server id="NotificationListenerService" address="/notificationListener">
        <jaxws:serviceBean>
            <ref bean="NotificationListenerServiceWrapper" />
        </jaxws:serviceBean>
        <jaxws:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxws:inInterceptors>
        <jaxws:outInterceptors>
            <ref bean="securityOutInterceptor" />
        </jaxws:outInterceptors>
    </jaxws:server>
    <jaxws:server id="LifecycleManagerService" address="/lifecycleManager">
        <jaxws:serviceBean>
            <ref bean="LifecycleManagerServiceWrapper" />
        </jaxws:serviceBean>
        <jaxws:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxws:inInterceptors>
        <jaxws:outInterceptors>
            <ref bean="securityOutInterceptor" />
        </jaxws:outInterceptors>
    </jaxws:server>
    <jaxws:server id="ValidatorService" address="/validator">
        <jaxws:serviceBean>
            <ref bean="ValidatorServiceWrapper" />
        </jaxws:serviceBean>
        <jaxws:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxws:inInterceptors>
        <jaxws:outInterceptors>
            <ref bean="securityOutInterceptor" />
        </jaxws:outInterceptors>
    </jaxws:server>
    <jaxws:server id="CatalogerService" address="/cataloger">
        <jaxws:serviceBean>
            <ref bean="CatalogerServiceWrapper" />
        </jaxws:serviceBean>
        <jaxws:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxws:inInterceptors>
        <jaxws:outInterceptors>
            <ref bean="securityOutInterceptor" />
        </jaxws:outInterceptors>
    </jaxws:server>
    <!-- End Soap Service Definitions -->

    <!-- REST Service Definitions -->
    <jaxrs:server id="registryRestServices" address="/rest">
        <jaxrs:inInterceptors>
            <ref bean="authenticationInterceptor" />
            <ref bean="xacmlInterceptor" />
        </jaxrs:inInterceptors>
        <jaxrs:serviceBeans>
            <ref bean="registryObjectsRestService" />
            <ref bean="repositoryObjectsRestService" />
            <ref bean="queryProtocolRestService" />
            <ref bean="registryUsers" />
            <ref bean="registryDataAccessService" />
            <ref bean="registryAvailabilityService" />
            <ref bean="RegistryFederationManager" />
            <ref bean="defineRegistryQuery" />
        </jaxrs:serviceBeans>
    </jaxrs:server>
    <!-- End REST Endpoint definitions -->
</beans>