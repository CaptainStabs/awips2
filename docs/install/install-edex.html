<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Organization">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1">
<meta name="google-site-verification" content="k0e8DrbD40s54xHNBqwIsRrSSAkZoprwtEYDnNY06bU" />
<meta name="google-site-verification" content="pnjjbQFvjPwaWhEXY6nSyaS9iyghmH-M_yLHBveDX2M">
<meta itemprop="name" content="Unidata AWIPS User Manual - EDEX Data Server Installation">
<meta itemprop="description" content="Polymer is a library that uses the latest web technologies to let you create custom HTML elements. Build anything from a button to a complete application as an encapsulated, reusable element that works across desktop and mobile.">


<meta itemprop="image" content="https://www.polymer-project.org/images/instacod.png">


<title>
  Unidata AWIPS User Manual
  
    - EDEX Data Server Installation
  
</title>
<link rel="publisher" href="https://plus.google.com/107187849809354688692">
<link rel="shortcut icon" href="http://www.unidata.ucar.edu/favicon.ico">
<link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500|Source+Code+Pro:400,500,700" rel="stylesheet">
<link href="/awips2/css/site2.css?20161206" rel="stylesheet">
<link href="/awips2/css/site2_sd_rules.css?20161206" rel="stylesheet" shim-shadowdom>



<script src="/awips2/components/webcomponentsjs/webcomponents.min.js?20161206"></script>
<!-- TODO: remove when https://github.com/Polymer/polymer/issues/391 is fixed -->
<link rel="import" href="/awips2/components/polymer/polymer.html">
<link rel="stylesheet" href="/awips2/css/elements/docs-menu.css">
<link rel="import" href="/awips2/elements/common_elements.vulcanized.html?20161206">


</head>
<body id="edex-data-server-installation">

<main id="content-container" class="polymer-content">
  <app-drawer id="sidebar" unresolved>
    <div layout vertical id="sidebar-content">
      <div id="logo-container" layout horizontal center>
        <a href="/awips2/" class="logo"><img src="/awips2/images/logos/awips2.png" alt="Unidata AWIPS User Guide"></a>
      </div>

      <docs-menu unresolved flex
		 baseurl='/awips2'
                 coreElements='{"core-header-panel":"components/core-header-panel/core-header-panel.html","core-transition-pages":"components/core-animated-pages/transitions/core-transition-pages.html","core-animated-pages":"components/core-animated-pages/core-animated-pages.html","core-overlay":"components/core-overlay/core-overlay.html","core-toolbar":"components/core-toolbar/core-toolbar.html","core-image":"components/core-image/core-image.html","core-shared-lib":"components/core-shared-lib/core-shared-lib.html","core-a11y-keys":"components/core-a11y-keys/core-a11y-keys.html","core-menu-button":"components/core-menu-button/core-menu-button.html","core-icon":"components/core-icon/core-icon.html","core-selection":"components/core-selection/core-selection.html","core-style":"components/core-style/core-style.html","core-menu":"components/core-menu/core-menu.html","core-submenu":"components/core-menu/core-submenu.html","core-list":"components/core-list/core-list.html","core-dropdown-menu":"components/core-dropdown-menu/core-dropdown-menu.html","core-input":"components/core-input/core-input.html","core-iconset-svg":"components/core-iconset-svg/core-iconset-svg.html","core-field":"components/core-field/core-field.html","core-selector":"components/core-selector/core-selector.html","core-media-query":"components/core-media-query/core-media-query.html","core-animation-group":"components/core-animation/core-animation-group.html","core-animation":"components/core-animation/core-animation.html","core-animation-keyframe":"components/core-animation/core-animation.html","core-animation-prop":"components/core-animation/core-animation.html","core-dropdown":"components/core-dropdown/core-dropdown.html","core-dropdown-base":"components/core-dropdown/core-dropdown-base.html","core-pages":"components/core-pages/core-pages.html","core-meta":"components/core-meta/core-meta.html","core-splitter":"components/core-splitter/core-splitter.html","core-scroll-header-panel":"components/core-scroll-header-panel/core-scroll-header-panel.html","core-tooltip":"components/core-tooltip/core-tooltip.html","core-localstorage":"components/core-localstorage/core-localstorage.html","core-scroll-threshold":"components/core-scroll-threshold/core-scroll-threshold.html","core-drag-drop":"components/core-drag-drop/core-drag-drop.html","core-iconset":"components/core-iconset/core-iconset.html","core-label":"components/core-label/core-label.html","core-signals":"components/core-signals/core-signals.html","core-transition":"components/core-transition/core-transition.html","core-scaffold":"components/core-scaffold/core-scaffold.html","core-drawer-panel":"components/core-drawer-panel/core-drawer-panel.html","core-range":"components/core-range/core-range.html","core-collapse":"components/core-collapse/core-collapse.html","core-xhr":"components/core-ajax/core-xhr.html","core-ajax":"components/core-ajax/core-ajax.html","core-icon-button":"components/core-icon-button/core-icon-button.html","core-item":"components/core-item/core-item.html"}'
                 paperElements='{"paper-dropdown":"components/paper-dropdown/paper-dropdown.html","paper-dropdown-transition":"components/paper-dropdown/paper-dropdown-transition.html","paper-item":"components/paper-item/paper-item.html","paper-dropdown-menu":"components/paper-dropdown-menu/paper-dropdown-menu.html","paper-checkbox":"components/paper-checkbox/paper-checkbox.html","paper-button":"components/paper-button/paper-button.html","paper-button-base":"components/paper-button/paper-button-base.html","paper-menu-button":"components/paper-menu-button/paper-menu-button.html","paper-radio-group":"components/paper-radio-group/paper-radio-group.html","paper-toast":"components/paper-toast/paper-toast.html","paper-char-counter":"components/paper-input/paper-char-counter.html","paper-autogrow-textarea":"components/paper-input/paper-autogrow-textarea.html","paper-input":"components/paper-input/paper-input.html","paper-input-decorator":"components/paper-input/paper-input-decorator.html","paper-slider":"components/paper-slider/paper-slider.html","paper-toggle-button":"components/paper-toggle-button/paper-toggle-button.html","paper-fab":"components/paper-fab/paper-fab.html","paper-ripple":"components/paper-ripple/paper-ripple.html","paper-icon-button":"components/paper-icon-button/paper-icon-button.html","paper-tabs":"components/paper-tabs/paper-tabs.html","paper-tab":"components/paper-tabs/paper-tab.html","paper-shadow":"components/paper-shadow/paper-shadow.html","paper-radio-button":"components/paper-radio-button/paper-radio-button.html","paper-dialog":"components/paper-dialog/paper-dialog.html","paper-action-dialog":"components/paper-dialog/paper-action-dialog.html","paper-dialog-base":"components/paper-dialog/paper-dialog-base.html","paper-dialog-transition":"components/paper-dialog/paper-dialog-transition.html","paper-spinner":"components/paper-spinner/paper-spinner.html","paper-progress":"components/paper-progress/paper-progress.html"}'></docs-menu>
    </div>
  </app-drawer>

  <scroll-area sidebar unresolved class="scrolling">
    <site-banner type="guide" shortname="Docs" unresolved>
      
<app-bar theme="light" class="bar fixed">
</app-bar>

      <header class="shrink">
        <h1>
         EDEX Data Server Installation
        </h1>
      </header>
    </site-banner>

    
    

    <article class="show-permalinks">

      <header class="onlyonmobile">
        <h1>
          : EDEX Data Server Installation
        </h1>
      </header>

      <h1 id="core-icon-iconfalinux-aria-labelfile-download-roleimgcore-icon-edex-for-linux"><core-icon icon="fa:linux" aria-label="file-download" role="img"></core-icon> EDEX for Linux</h1>

<p><a href="http://www.unidata.ucar.edu/software/awips2/installEDEX.sh"><paper-button raised="" role="button" tabindex="0"><core-icon icon="file-download" aria-label="file-download" role="img"></core-icon>installEDEX.sh</paper-button></a> Installs to subdirectories in<code>/awips2</code></p>

<h2 id="linux-system-requirements">Linux System Requirements</h2>

<blockquote>
  <ul>
    <li><strong>64-bit</strong> CentOS/RHEL 6 or 7</li>
    <li><strong>8 CPU</strong> cores (16 recommended)</li>
    <li><strong>16GB</strong> RAM (32+GB recommended for full IDD processing)</li>
    <li><strong>500GB</strong> disk space, more if you build a data archive. An <strong>SSD is an especially good idea here</strong>, mounted to <code>/awips2/edex/data/hdf5</code>  to contain the decoded data files, or mounted to <code>/awips2</code> to contain the entire AWIPS software system.</li>
  </ul>
</blockquote>

<p>EDEX <strong>can scale to any system</strong>, either by adjusting the incoming data feeds, or the resources allocated to each data type (read more), but when selecting a server, <strong>more is always better</strong>.</p>

<p><strong>64-bit CentOS/RHEL 6 and 7</strong> are the only supported Linux operating systems. You may have luck with Fedora Core 12 to 14 and Scientific Linux. EDEX is not developed, tested, or supported on Debian, Ubuntu, SUSE, Solaris, OS X, or Windows.</p>

<hr />

<h1 id="linux-one-time-setup-as-root">Linux One-Time Setup (as root)</h1>

<h2 id="create-user-and-group-awipsfxalpha">1. Create user and group <strong>awips:fxalpha</strong></h2>

<p><code>groupadd fxalpha &amp;&amp; useradd -G fxalpha awips</code></p>

<h2 id="configure-iptables-to-allow-tcp-connections-on-ports-5672-9581-and-9582">2. Configure iptables to allow TCP connections on ports <strong>5672</strong>, <strong>9581</strong> and <strong>9582</strong></h2>

<ul>
  <li>
    <p>To open ports to <strong>all connections</strong></p>

    <p><code>vi /etc/sysconfig/iptables</code></p>

    <pre><code>  *filter
  :INPUT ACCEPT [0:0]
  :FORWARD ACCEPT [0:0]
  :OUTPUT ACCEPT [0:0]
  -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
  -A INPUT -p icmp -j ACCEPT
  -A INPUT -i lo -j ACCEPT
  -A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT
  -A INPUT -m state --state NEW -m tcp -p tcp --dport 5672 -j ACCEPT
  -A INPUT -m state --state NEW -m tcp -p tcp --dport 9581 -j ACCEPT
  -A INPUT -m state --state NEW -m tcp -p tcp --dport 9582 -j ACCEPT
  -A INPUT -j REJECT --reject-with icmp-host-prohibited
  -A FORWARD -j REJECT --reject-with icmp-host-prohibited
  COMMIT
</code></pre>
  </li>
  <li>
    <p>To open ports to <strong>specific IP addresses</strong></p>

    <p><code>vi /etc/sysconfig/iptables</code></p>

    <pre><code>  *filter
  :INPUT DROP [0:0]
  :FORWARD DROP [0:0]
  :OUTPUT ACCEPT [0:0]
  :EXTERNAL - [0:0]
  :EDEX - [0:0]
    
  -A INPUT -i lo -j ACCEPT
  -A INPUT -p icmp --icmp-type any -j ACCEPT
  -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
  -A INPUT -s 128.117.140.0/24 -j EDEX
  -A INPUT -s 128.117.156.0/24 -j EDEX
  -A INPUT -j EXTERNAL
  -A EXTERNAL -j REJECT
    
  -A EDEX -m state --state NEW -p tcp --dport 22 -j ACCEPT
  -A EDEX -m state --state NEW -p tcp --dport 5672 -j ACCEPT
  -A EDEX -m state --state NEW -p tcp --dport 9581 -j ACCEPT
  -A EDEX -m state --state NEW -p tcp --dport 9582 -j ACCEPT
  -A EDEX -j REJECT
  COMMIT
</code></pre>

    <blockquote>
      <p>In this example, the IP range <code>128.117.140.0/24</code> will match all 128.117.140.* addresses, while <code>128.117.156.0/24</code> will match 128.117.156.*.</p>
    </blockquote>
  </li>
</ul>

<h2 id="restart-iptables">3. Restart iptables</h2>

<p><code>service iptables restart</code></p>

<h2 id="disable-selinux">4. Disable SELinux</h2>

<p><code>vi /etc/sysconfig/selinux</code></p>

<pre><code># This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=disabled
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted
</code></pre>

<blockquote>
  <p><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Enabling_and_Disabling_SELinux-Disabling_SELinux.html">Read more about selinux at redhat.com</a></p>
</blockquote>

<h2 id="reboot">4. <code>reboot</code></h2>

<p>Only required if iptables was updated.</p>

<h2 id="data-disks">5. Data Disks</h2>

<p><code>/awips2</code> requires 20GB for installed software.</p>

<p><code>/awips2/data_store</code> will contain the last hours’ worth of raw data written by the LDM (~20GB).  Scouring of this directory is performed by EDEX to only retain the last hours worth of data (previously with <code>ldmadmin scour</code> the minimum was <em>24 hours</em>).</p>

<p><code>/awips2/edex/data/hdf5</code> requires 500GB for live data ingest of all IDD feeds. We recommend mounting an <strong>SSD</strong> here, or to the entire <code>/awips2</code> filesystem (or both, as shown):</p>

<pre><code>    Filesystem      Size  Used Avail Use% Mounted on
    /dev/sda1        30G  2.5G   26G   9% /
    tmpfs            28G     0   28G   0% /dev/shm
    /dev/sdc1       788G   81G  667G  11% /awips2
    /dev/sdb1       788G   41G  708G  10% /awips2/edex/data/hdf5
</code></pre>

<h2 id="install-edex">6. Install EDEX</h2>

<ul>
  <li>
    <p><code>wget http://www.unidata.ucar.edu/software/awips2/installEDEX.sh</code></p>
  </li>
  <li>
    <p><code>chmod 755 ./installEDEX.sh</code></p>
  </li>
  <li>
    <p><code>./installEDEX.sh</code></p>
  </li>
</ul>

<p>What does <code>installEDEX.sh</code> do?</p>

<blockquote>
  <ol>
    <li>Downloads <a href="http://www.unidata.ucar.edu/software/awips2/doc/awips2.repo">awips2.repo</a> or <a href="http://www.unidata.ucar.edu/software/awips2/doc/el7.repo">el7.repo</a> to <code>/etc/yum.repos.d/awips2.repo</code></li>
    <li>Runs <code>yum clean all</code></li>
    <li>Runs <code>yum groupinstall awips2-server</code></li>
  </ol>
</blockquote>

<h2 id="edex-setup">7. <code>edex setup</code></h2>

<p>The command <code>edex setup</code> attempts to add the domain name of your server.</p>

<ul>
  <li>
    <p><code>/awips2/edex/bin/setup.env</code> <strong>should contain the fully-qualified domain name</strong>, externally resolved, localhost will not work.</p>

    <pre><code>  export AW_SITE_IDENTIFIER=BOU
  export EDEX_SERVER=edex.westus.cloudapp.azure.com
</code></pre>
  </li>
  <li>
    <p><code>/awips2/ldm/etc/ldmd.conf</code> contains the upstream server (default <em>idd.unidata.ucar.edu</em>, which requires you connect form a .edu domain). This file also contains the <strong>edexBridge</strong> hostname (default <em>localhost</em>).</p>

    <pre><code>  EXEC    "pqact -e"
  EXEC    "edexBridge -s localhost"
</code></pre>
  </li>
  <li>
    <p><code>/etc/security/limits.conf</code> defines the number of user processes and files (this step is automatically performed by <code>installEDEX.sh</code>). Without these definitions, Qpid is known to crash during periods of high ingest.</p>

    <pre><code>  awips soft nproc 65536
  awips soft nofile 65536
</code></pre>
  </li>
</ul>

<p>To start and stop EDEX</p>

<pre><code>edex start
</code></pre>

<p>and</p>

<pre><code>edex stop
</code></pre>

<hr />

<h1 id="important-directories">Important Directories</h1>

<ul>
  <li><code>/awips2</code> - Contains all of the installed AWIPS software.</li>
  <li><code>/awips2/edex/logs</code> - EDEX logs.</li>
  <li><code>/awips2/httpd_pypies/var/log/httpd</code> - httpd-pypies logs.</li>
  <li><code>/awips2/data/pg_log</code> - PostgreSQL logs.</li>
  <li><code>/awips2/qpid/log</code> - Qpid logs.</li>
  <li><code>/awips2/edex/data/hdf5</code> - HDF5 data store.</li>
  <li><code>/awips2/edex/data/utility</code> - Localization store and configuration files.</li>
  <li><code>/awips2/ldm/etc</code> - Location of <strong>ldmd.conf</strong> and <strong>pqact.conf</strong></li>
  <li><code>/awips2/ldm/logs</code> - LDM logs.</li>
  <li><code>/awips2/data_store</code> - Raw data store.</li>
</ul>

    </article>

    <footer>
  <div>
    <div class="links">
      <a href="https://www.facebook.com/unidata" title="Unidata on Facebook" tabindex="-1"><paper-button><core-icon icon="social:post-facebook"></core-icon>Facebook</paper-button></a>
      <a href="https://twitter.com/intent/follow?screen_name=unidata" data-twitter-follow title="Follow @Unidata on Twitter" tabindex="-1"><paper-button><core-icon icon="social:post-twitter"></core-icon>Twitter</paper-button></a>
      <a href="https://github.com/Unidata/awips2"><paper-button class="github" tabindex="-1"><core-icon icon="social:post-github"></core-icon>GitHub</paper-button></a>
      <a href="https://github.com/Unidata/awips2/issues/new" tabindex="-1"><paper-button><core-icon icon="bug-report"></core-icon>File a bug</paper-button></a>
    </div>

  </div>
</footer>





<script src="/awips2/js/prettify/prettify.js"></script>

<!-- <script src="/awips2/js/bower_components/smoothscroll/smoothscroll.js"></script> -->
<script src="/awips2/js/app.js?20161206"></script>


  </scroll-area>

</main>

</body>
</html>
