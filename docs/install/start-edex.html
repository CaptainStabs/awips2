<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Organization">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1">
<meta name="google-site-verification" content="k0e8DrbD40s54xHNBqwIsRrSSAkZoprwtEYDnNY06bU" />
<meta name="google-site-verification" content="pnjjbQFvjPwaWhEXY6nSyaS9iyghmH-M_yLHBveDX2M">
<meta itemprop="name" content="Unidata AWIPS User Manual - EDEX Start and Stop">
<meta itemprop="description" content="Polymer is a library that uses the latest web technologies to let you create custom HTML elements. Build anything from a button to a complete application as an encapsulated, reusable element that works across desktop and mobile.">


<meta itemprop="image" content="https://www.polymer-project.org/images/instacod.png">


<title>
  Unidata AWIPS User Manual
  
    - EDEX Start and Stop
  
</title>
<link rel="publisher" href="https://plus.google.com/107187849809354688692">
<link rel="shortcut icon" href="http://www.unidata.ucar.edu/favicon.ico">
<link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500|Source+Code+Pro:400,500,700" rel="stylesheet">
<link href="/awips2/css/site2.css?20161214" rel="stylesheet">
<link href="/awips2/css/site2_sd_rules.css?20161214" rel="stylesheet" shim-shadowdom>



<script src="/awips2/components/webcomponentsjs/webcomponents.min.js?20161214"></script>
<!-- TODO: remove when https://github.com/Polymer/polymer/issues/391 is fixed -->
<link rel="import" href="/awips2/components/polymer/polymer.html">
<link rel="stylesheet" href="/awips2/css/elements/docs-menu.css">
<link rel="import" href="/awips2/elements/common_elements.vulcanized.html?20161214">


</head>
<body id="edex-start-and-stop">

<main id="content-container" class="polymer-content">
  <app-drawer id="sidebar" unresolved>
    <div layout vertical id="sidebar-content">
      <div id="logo-container" layout horizontal center>
        <a href="/awips2/" class="logo"><img style="width:200px;" src="/awips2/images/logos/awips2.png" alt="Unidata AWIPS User Guide"></a>
      </div>

      <docs-menu unresolved flex
		 baseurl='/awips2'
                 coreElements='{"core-header-panel":"components/core-header-panel/core-header-panel.html","core-transition-pages":"components/core-animated-pages/transitions/core-transition-pages.html","core-animated-pages":"components/core-animated-pages/core-animated-pages.html","core-overlay":"components/core-overlay/core-overlay.html","core-toolbar":"components/core-toolbar/core-toolbar.html","core-image":"components/core-image/core-image.html","core-shared-lib":"components/core-shared-lib/core-shared-lib.html","core-a11y-keys":"components/core-a11y-keys/core-a11y-keys.html","core-menu-button":"components/core-menu-button/core-menu-button.html","core-icon":"components/core-icon/core-icon.html","core-selection":"components/core-selection/core-selection.html","core-style":"components/core-style/core-style.html","core-menu":"components/core-menu/core-menu.html","core-submenu":"components/core-menu/core-submenu.html","core-list":"components/core-list/core-list.html","core-dropdown-menu":"components/core-dropdown-menu/core-dropdown-menu.html","core-input":"components/core-input/core-input.html","core-iconset-svg":"components/core-iconset-svg/core-iconset-svg.html","core-field":"components/core-field/core-field.html","core-selector":"components/core-selector/core-selector.html","core-media-query":"components/core-media-query/core-media-query.html","core-animation-group":"components/core-animation/core-animation-group.html","core-animation":"components/core-animation/core-animation.html","core-animation-keyframe":"components/core-animation/core-animation.html","core-animation-prop":"components/core-animation/core-animation.html","core-dropdown":"components/core-dropdown/core-dropdown.html","core-dropdown-base":"components/core-dropdown/core-dropdown-base.html","core-pages":"components/core-pages/core-pages.html","core-meta":"components/core-meta/core-meta.html","core-splitter":"components/core-splitter/core-splitter.html","core-scroll-header-panel":"components/core-scroll-header-panel/core-scroll-header-panel.html","core-tooltip":"components/core-tooltip/core-tooltip.html","core-localstorage":"components/core-localstorage/core-localstorage.html","core-scroll-threshold":"components/core-scroll-threshold/core-scroll-threshold.html","core-drag-drop":"components/core-drag-drop/core-drag-drop.html","core-iconset":"components/core-iconset/core-iconset.html","core-label":"components/core-label/core-label.html","core-signals":"components/core-signals/core-signals.html","core-transition":"components/core-transition/core-transition.html","core-scaffold":"components/core-scaffold/core-scaffold.html","core-drawer-panel":"components/core-drawer-panel/core-drawer-panel.html","core-range":"components/core-range/core-range.html","core-collapse":"components/core-collapse/core-collapse.html","core-xhr":"components/core-ajax/core-xhr.html","core-ajax":"components/core-ajax/core-ajax.html","core-icon-button":"components/core-icon-button/core-icon-button.html","core-item":"components/core-item/core-item.html"}'
                 paperElements='{"paper-dropdown":"components/paper-dropdown/paper-dropdown.html","paper-dropdown-transition":"components/paper-dropdown/paper-dropdown-transition.html","paper-item":"components/paper-item/paper-item.html","paper-dropdown-menu":"components/paper-dropdown-menu/paper-dropdown-menu.html","paper-checkbox":"components/paper-checkbox/paper-checkbox.html","paper-button":"components/paper-button/paper-button.html","paper-button-base":"components/paper-button/paper-button-base.html","paper-menu-button":"components/paper-menu-button/paper-menu-button.html","paper-radio-group":"components/paper-radio-group/paper-radio-group.html","paper-toast":"components/paper-toast/paper-toast.html","paper-char-counter":"components/paper-input/paper-char-counter.html","paper-autogrow-textarea":"components/paper-input/paper-autogrow-textarea.html","paper-input":"components/paper-input/paper-input.html","paper-input-decorator":"components/paper-input/paper-input-decorator.html","paper-slider":"components/paper-slider/paper-slider.html","paper-toggle-button":"components/paper-toggle-button/paper-toggle-button.html","paper-fab":"components/paper-fab/paper-fab.html","paper-ripple":"components/paper-ripple/paper-ripple.html","paper-icon-button":"components/paper-icon-button/paper-icon-button.html","paper-tabs":"components/paper-tabs/paper-tabs.html","paper-tab":"components/paper-tabs/paper-tab.html","paper-shadow":"components/paper-shadow/paper-shadow.html","paper-radio-button":"components/paper-radio-button/paper-radio-button.html","paper-dialog":"components/paper-dialog/paper-dialog.html","paper-action-dialog":"components/paper-dialog/paper-action-dialog.html","paper-dialog-base":"components/paper-dialog/paper-dialog-base.html","paper-dialog-transition":"components/paper-dialog/paper-dialog-transition.html","paper-spinner":"components/paper-spinner/paper-spinner.html","paper-progress":"components/paper-progress/paper-progress.html"}'></docs-menu>
    </div>
  </app-drawer>

  <scroll-area sidebar unresolved class="scrolling">
    <site-banner type="" shortname="" unresolved>
      
<app-bar theme="light" class="bar fixed">
</app-bar>


          
      <header class="shrink">
        <h1>
             EDEX Start and Stop
        </h1>
      </header>
          
    </site-banner>

    
    

    <article class="show-permalinks">

      <header class="onlyonmobile">
        <h1>
          : EDEX Start and Stop
        </h1>
      </header>

      
<!--TOC_START-->
<ul id="markdown-toc">
  <li><a href="#edex-start" id="markdown-toc-edex-start">edex start</a></li>
  <li><a href="#edex-stop" id="markdown-toc-edex-stop">edex stop</a></li>
  <li><a href="#edex-setup" id="markdown-toc-edex-setup">edex setup</a></li>
  <li><a href="#edex-log" id="markdown-toc-edex-log">edex log</a></li>
  <li><a href="#edex-users" id="markdown-toc-edex-users">edex users</a></li>
  <li><a href="#edex-purge" id="markdown-toc-edex-purge">edex purge</a></li>
  <li><a href="#edex-memory-configuration" id="markdown-toc-edex-memory-configuration">EDEX Memory Configuration</a></li>
  <li><a href="#edex-plugin-configuration" id="markdown-toc-edex-plugin-configuration">EDEX Plugin Configuration</a></li>
</ul>
<!--TOC_END-->

<p>There are five EDEX service installed into <code>/etc/init.d/</code>, four of which run on boot:</p>

<pre><code>service postgres start
service httpd-pypies start
service qpidd start
service edex_camel start
</code></pre>

<p>The fifth, <code>edex_ldm</code>, does <strong>not run at boot</strong> to prevent filling up disk space if EDEX is not running.</p>

<pre><code>service edex_ldm start
</code></pre>

<p>All of these services are started and stopped by a single program <code>edex</code>,</p>

<h1 id="edex-start">edex start</h1>

<pre><code>edex start

Starting EDEX PostgreSQL:                                  [  OK  ]
Starting httpd:                                            [  OK  ]
Starting QPID                                              [  OK  ]
Starting EDEX Camel (request): 
Starting EDEX Camel (ingest): 
Starting EDEX Camel (ingestGrib): 
Starting AWIPS LDM:The product-queue is OK.
...
</code></pre>

<h1 id="edex-stop">edex stop</h1>

<pre><code>edex stop

Stopping EDEX Camel (request): 
Stopping EDEX Camel (ingest): 
Stopping EDEX Camel (ingestGrib): 
Stopping QPID                                              [  OK  ]
Stopping httpd:                                            [  OK  ]
Stopping EDEX PostgreSQL:                                  [  OK  ]
Stopping AWIPS LDM:Stopping the LDM server...
...
</code></pre>

<h1 id="edex-setup">edex setup</h1>

<pre><code>edex setup

[edex] EDEX IP and Hostname Setup
 Checking /awips2/data/pg_hba.conf [OK]
 Checking /awips2/edex/bin/setup.env [OK]

[edit] Hostname edex.unidata.ucar.edu added to /awips2/ldm/etc/ldmd.conf
[done]
</code></pre>

<p>This command configures and/or confirms that the EDEX hostname and IP address definitions exist (<code>edex setup</code> is run by <code>edex start</code>).</p>

<blockquote>
  <p>If your EDEX server is running but you see the message “Connectivity Error: Unable to validate localization preferences” in CAVE, it may mean that the domain name defined in <code>/awips2/edex/bin/setup.env</code> can not be resolved from <em>outside</em> the server.  Some machines have different <strong>internally-resolved</strong> and <strong>externally-resolved</strong> domain names (cloud-based especially). The name defined in <code>setup.env</code> must be <strong>externally-resolvable</strong>.</p>
</blockquote>

<h1 id="edex-log">edex log</h1>

<pre><code>edex log

[edex] EDEX Log Viewer

 :: No log specified - Defaulting to ingest log
 :: Viewing /awips2/edex/logs/edex-ingest-20151209.log. Press CTRL+C to exit

INFO [Ingest.binlightning-1] /awips2/data_store/SFPA42_KWBC_091833_38031177.2015120918 processed in: 0.0050 (sec) Latency: 0.0550 (sec)
INFO [Ingest.obs-1] /awips2/data_store/metar/SAIN31_VABB_091830_131392869.2015120918 processed in: 0.0810 (sec) Latency: 0.1800 (sec)
</code></pre>

<p>More edex logs…</p>

<pre><code>edex log grib
edex log request
edex log ldm
edex log radar
edex log satellite
edex log text
</code></pre>

<h1 id="edex-users">edex users</h1>

<p>To see a list of clients connecting to your EDEX server, use the <code>edex users [YYYYMMDD]</code> command, where <code>YYYYMMDD</code> is the optional date string.</p>

<pre><code>edex users

 -- EDEX Users 20160826 --
user@101.253.20.225
user@192.168.1.67
awips@0.0.0.0
awips@sdsmt.edu
</code></pre>

<h1 id="edex-purge">edex purge</h1>

<p>To view any stuck purge jobs in PortgreSQL (a rare but serious problem if your disk fills up).  The solution to this is to run <code>edex purge reset</code>.</p>

<hr />

<h1 id="edex-memory-configuration">EDEX Memory Configuration</h1>

<p>The directory <code>/awips2/edex/etc/</code> contains files which define the amount of memory used for each of the three EDEX JVMs (ingest, ingestGrib, request):</p>

<pre><code>ls -al /awips2/edex/etc/
-rw-r--r-- 1 awips fxalpha 1501 Dec  7 00:37 default.sh
-rw-r--r-- 1 awips fxalpha 1655 Dec 12 19:47 ingestGrib.sh
-rw-r--r-- 1 awips fxalpha  937 Dec 12 19:46 ingest.sh
-rw-r--r-- 1 awips fxalpha 1231 Dec 12 19:47 request.sh
</code></pre>

<p>Each file contains the <strong>Xmx</strong> definition for maximum memory:</p>

<pre><code>export INIT_MEM=512 # in Meg
export MAX_MEM=4096 # in Meg
</code></pre>

<p>After editing these files, you must restart edex (<code>service edex_camel restart</code>).</p>

<hr />

<h1 id="edex-plugin-configuration">EDEX Plugin Configuration</h1>

<p>The directory <code>/awips2/edex/conf/modes</code> contains XML files with rules defining which plugins are included or excluded with each JVM (ingest, ingestGrid, request):</p>

<pre><code>ls -la /awips2/edex/conf/modes
-rw-r--r-- 1 awips fxalpha 1982 Dec  6 21:26 grid-modes.xml
-rw-r--r-- 1 awips fxalpha  928 Dec  6 21:24 ingest-modes.xml
-rw-r--r-- 1 awips fxalpha 1689 Dec  6 21:24 request-modes.xml
</code></pre>

<p>EDEX services are all registered through spring. By including or excluding specific spring files we can determine at startup which services the EDEX instance should start.</p>

<p>All mode files are merged at startup. Modes files with modes that have the same name are combined so the end result is an aggregate of patterns in all files.  Include and exclude tags should have regular expressions that are compatible with Java’s Pattern class.  If you provide no <code>&lt;include&gt;</code> tag for a particular mode, the include defaults to <code>.*</code>.</p>

<p>An example of <code>/awips2/edex/conf/modes/ingest-modes.xml</code>, with a number of unused plugin decoders excluded because the data are not available outside of the SBN:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;edexModes&gt;
	&lt;mode name="ingest"&gt;
		&lt;exclude&gt;.*request.*&lt;/exclude&gt;
		&lt;exclude&gt;edex-security.xml&lt;/exclude&gt;
		&lt;exclude&gt;rpgenvdata.*&lt;/exclude&gt;
		&lt;exclude&gt;taf.*&lt;/exclude&gt;
		&lt;exclude&gt;ldad.*&lt;/exclude&gt;
		&lt;exclude&gt;ghcd.*&lt;/exclude&gt;
		&lt;exclude&gt;geomag.*&lt;/exclude&gt;
		&lt;exclude&gt;mping.*&lt;/exclude&gt;
		&lt;exclude&gt;modis.*&lt;/exclude&gt;
		&lt;exclude&gt;mosaic.*&lt;/exclude&gt;
		&lt;exclude&gt;shef.*&lt;/exclude&gt;
		&lt;exclude&gt;madis.*&lt;/exclude&gt;
		&lt;exclude&gt;idft.*&lt;/exclude&gt;
		&lt;exclude&gt;ffmp.*&lt;/exclude&gt;
		&lt;exclude&gt;stormtrack.*&lt;/exclude&gt;
		&lt;exclude&gt;solarimage.*&lt;/exclude&gt;
		&lt;exclude&gt;retrieval.*&lt;/exclude&gt;
		&lt;exclude&gt;regionalsat.*&lt;/exclude&gt;
		&lt;exclude&gt;pointset-netcdf.*&lt;/exclude&gt;
		&lt;exclude&gt;ncscat.*&lt;/exclude&gt;
		&lt;exclude&gt;profiler.*&lt;/exclude&gt;
		&lt;exclude&gt;bufrobs.*&lt;/exclude&gt;
		&lt;exclude&gt;bufrmthdw.*&lt;/exclude&gt;
		&lt;exclude&gt;sgwh.*&lt;/exclude&gt;
	&lt;/mode&gt;
&lt;/edexModes&gt;
</code></pre>


    </article>

    <footer>
  <div>
    <div class="links">
      <a href="https://www.facebook.com/unidata" title="Unidata on Facebook" tabindex="-1"><paper-button><core-icon icon="social:post-facebook"></core-icon>Facebook</paper-button></a>
      <a href="https://twitter.com/intent/follow?screen_name=unidata" data-twitter-follow title="Follow @Unidata on Twitter" tabindex="-1"><paper-button><core-icon icon="social:post-twitter"></core-icon>Twitter</paper-button></a>
      <a href="https://github.com/Unidata/awips2"><paper-button class="github" tabindex="-1"><core-icon icon="social:post-github"></core-icon>GitHub</paper-button></a>
      <a href="https://github.com/Unidata/awips2/issues/new" tabindex="-1"><paper-button><core-icon icon="bug-report"></core-icon>File a bug</paper-button></a>
    </div>

  </div>
</footer>





<script src="/awips2/js/prettify/prettify.js"></script>

<!-- <script src="/awips2/js/bower_components/smoothscroll/smoothscroll.js"></script> -->
<script src="/awips2/js/app.js?20161214"></script>


  </scroll-area>

</main>

</body>
</html>
