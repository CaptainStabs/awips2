<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Organization">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1">
<meta name="google-site-verification" content="k0e8DrbD40s54xHNBqwIsRrSSAkZoprwtEYDnNY06bU" />
<meta name="google-site-verification" content="pnjjbQFvjPwaWhEXY6nSyaS9iyghmH-M_yLHBveDX2M">
<meta itemprop="name" content="Unidata AWIPS User Manual - AWIPS Derived Parameters">
<meta itemprop="description" content="Polymer is a library that uses the latest web technologies to let you create custom HTML elements. Build anything from a button to a complete application as an encapsulated, reusable element that works across desktop and mobile.">


<meta itemprop="image" content="https://www.polymer-project.org/images/instacod.png">


<title>
  
    AWIPS Derived Parameters - 
  
  Unidata AWIPS User Manual
</title>
<link rel="publisher" href="https://plus.google.com/107187849809354688692">
<link rel="shortcut icon" href="http://www.unidata.ucar.edu/favicon.ico">
<link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500|Source+Code+Pro:400,500,700" rel="stylesheet">
<link href="/awips2/css/site2.css?20170404" rel="stylesheet">
<link href="/awips2/css/site2_sd_rules.css?20170404" rel="stylesheet" shim-shadowdom>



<script src="/awips2/components/webcomponentsjs/webcomponents.min.js?20170404"></script>
<!-- TODO: remove when https://github.com/Polymer/polymer/issues/391 is fixed -->
<link rel="import" href="/awips2/components/polymer/polymer.html">
<link rel="stylesheet" href="/awips2/css/elements/docs-menu.css">
<link rel="import" href="/awips2/elements/common_elements.vulcanized.html?20170404">


</head>
<body id="awips-derived-parameters">

<main id="content-container" class="polymer-content">
  <app-drawer id="sidebar" unresolved>
    <div layout vertical id="sidebar-content">
      <div id="logo-container" layout horizontal center>
        <a href="/awips2/" class="logo"><img style="width:200px;" src="/awips2/images/logos/awips2.png" alt="Unidata AWIPS User Guide"></a>
      </div>

      <docs-menu unresolved flex
		 baseurl='/awips2'
                 coreElements='{"core-a11y-keys":"components/core-a11y-keys/core-a11y-keys.html","core-ajax":"components/core-ajax/core-ajax.html","core-xhr":"components/core-ajax/core-xhr.html","core-animated-pages":"components/core-animated-pages/core-animated-pages.html","core-transition-pages":"components/core-animated-pages/transitions/core-transition-pages.html","core-animation-group":"components/core-animation/core-animation-group.html","core-animation":"components/core-animation/core-animation.html","core-animation-keyframe":"components/core-animation/core-animation.html","core-animation-prop":"components/core-animation/core-animation.html","core-collapse":"components/core-collapse/core-collapse.html","core-drag-drop":"components/core-drag-drop/core-drag-drop.html","core-drawer-panel":"components/core-drawer-panel/core-drawer-panel.html","core-dropdown-base":"components/core-dropdown/core-dropdown-base.html","core-dropdown":"components/core-dropdown/core-dropdown.html","core-dropdown-menu":"components/core-dropdown-menu/core-dropdown-menu.html","core-field":"components/core-field/core-field.html","core-header-panel":"components/core-header-panel/core-header-panel.html","core-icon":"components/core-icon/core-icon.html","core-icon-button":"components/core-icon-button/core-icon-button.html","core-iconset":"components/core-iconset/core-iconset.html","core-iconset-svg":"components/core-iconset-svg/core-iconset-svg.html","core-image":"components/core-image/core-image.html","core-input":"components/core-input/core-input.html","core-item":"components/core-item/core-item.html","core-label":"components/core-label/core-label.html","core-list":"components/core-list/core-list.html","core-localstorage":"components/core-localstorage/core-localstorage.html","core-media-query":"components/core-media-query/core-media-query.html","core-menu":"components/core-menu/core-menu.html","core-submenu":"components/core-menu/core-submenu.html","core-menu-button":"components/core-menu-button/core-menu-button.html","core-meta":"components/core-meta/core-meta.html","core-overlay":"components/core-overlay/core-overlay.html","core-pages":"components/core-pages/core-pages.html","core-range":"components/core-range/core-range.html","core-scaffold":"components/core-scaffold/core-scaffold.html","core-scroll-header-panel":"components/core-scroll-header-panel/core-scroll-header-panel.html","core-scroll-threshold":"components/core-scroll-threshold/core-scroll-threshold.html","core-selection":"components/core-selection/core-selection.html","core-selector":"components/core-selector/core-selector.html","core-shared-lib":"components/core-shared-lib/core-shared-lib.html","core-signals":"components/core-signals/core-signals.html","core-splitter":"components/core-splitter/core-splitter.html","core-style":"components/core-style/core-style.html","core-toolbar":"components/core-toolbar/core-toolbar.html","core-tooltip":"components/core-tooltip/core-tooltip.html","core-transition":"components/core-transition/core-transition.html"}'
                 paperElements='{"paper-button-base":"components/paper-button/paper-button-base.html","paper-button":"components/paper-button/paper-button.html","paper-checkbox":"components/paper-checkbox/paper-checkbox.html","paper-action-dialog":"components/paper-dialog/paper-action-dialog.html","paper-dialog-base":"components/paper-dialog/paper-dialog-base.html","paper-dialog-transition":"components/paper-dialog/paper-dialog-transition.html","paper-dialog":"components/paper-dialog/paper-dialog.html","paper-dropdown-transition":"components/paper-dropdown/paper-dropdown-transition.html","paper-dropdown":"components/paper-dropdown/paper-dropdown.html","paper-dropdown-menu":"components/paper-dropdown-menu/paper-dropdown-menu.html","paper-fab":"components/paper-fab/paper-fab.html","paper-icon-button":"components/paper-icon-button/paper-icon-button.html","paper-autogrow-textarea":"components/paper-input/paper-autogrow-textarea.html","paper-char-counter":"components/paper-input/paper-char-counter.html","paper-input-decorator":"components/paper-input/paper-input-decorator.html","paper-input":"components/paper-input/paper-input.html","paper-item":"components/paper-item/paper-item.html","paper-menu-button":"components/paper-menu-button/paper-menu-button.html","paper-progress":"components/paper-progress/paper-progress.html","paper-radio-button":"components/paper-radio-button/paper-radio-button.html","paper-radio-group":"components/paper-radio-group/paper-radio-group.html","paper-ripple":"components/paper-ripple/paper-ripple.html","paper-shadow":"components/paper-shadow/paper-shadow.html","paper-slider":"components/paper-slider/paper-slider.html","paper-spinner":"components/paper-spinner/paper-spinner.html","paper-tab":"components/paper-tabs/paper-tab.html","paper-tabs":"components/paper-tabs/paper-tabs.html","paper-toast":"components/paper-toast/paper-toast.html","paper-toggle-button":"components/paper-toggle-button/paper-toggle-button.html"}'></docs-menu>
    </div>
  </app-drawer>

  <scroll-area sidebar unresolved class="scrolling">
    <site-banner type="guide" shortname="Docs" unresolved>
      
<app-bar theme="light" class="bar fixed">
</app-bar>


          
      <header class="shrink">
        <h1>
            
              Python Meteorological Calculations
            : AWIPS Derived Parameters
        </h1>
      </header>
          
    </site-banner>

    
    

    <article class="show-permalinks">

      <header class="onlyonmobile">
        <h1>
          
          Python Meteorological Calculations
          : AWIPS Derived Parameters
        </h1>
      </header>

      
<!--TOC_START-->
<!--TOC_END-->

<p>AWIPS will calculate derived parameters using XML file definitions which refer to Python scripts where the actual calculations take place.   If and when there is an effort to verify calculated fields in Unidata Python packages, these should come in handy (along with the GEMPAK FORTRAN routines).</p>

<p>For gridded data there are three directories to know which contain derived parm XML files:
awips2 com.raytheon.uf.common.dataplugin.grid https://github.com/Unidata/awips2/tree/unidata_16.1.5/edexOsgi/com.raytheon.uf.common.dataplugin.grid/utility/common_static/base/derivedParameters/definitions
awips2-core com.raytheon.uf.common.derivparam https://github.com/Unidata/awips2-core/tree/unidata_16.1.4/common/com.raytheon.uf.common.derivparam/utility/common_static/base/derivedParameters/definitions
awips2-core com.raytheon.uf.common.derivparam.python https://github.com/Unidata/awips2-core/tree/unidata_16.1.4/common/com.raytheon.uf.common.derivparam.python/utility/common_static/base/derivedParameters
Notice the first is from the “awips2” repo, while the others are from “awips2-core”, so if a derived parm field is not showing up in directory listings or search results for one repo, be sure to search the other.</p>

<p>Helicity, for example, from https://github.com/Unidata/awips2-core/blob/unidata_16.1.4/common/com.raytheon.uf.common.derivparam/utility/common_static/base/derivedParameters/definitions/Heli.xml</p>

<derivedparameter unit="m*m/s*s" name="Helicity" abbreviation="Heli" xmlns:ns2="group">
	<method name="Alias" levels="Surface">
		<field abbreviation="srHel" level="Station" />
	</method>
	<method name="Or" levels="0FHAG">
		<field abbreviation="Heli" level="Surface" />
		<field abbreviation="Heli" level="BLyr" />
	</method>
    	<method name="Alias" levels="0FHAG">
		<field abbreviation="Heli" level="Surface" />
	</method> 
	<method name="Heli" levels="0-1kmAgl&gt;0-4kmAgl">
		<field abbreviation="uWStk" />
		<field abbreviation="vWStk" />
		<field abbreviation="RM5" level="Layer" />
	</method>
</derivedparameter>

<p>The first three <method></method> blocks act as constructors allowing for different levels to be passed the main method, which determines the calculation to be performed. Name=”Heli” here refers to the derivedParameter file Heli.py located at https://github.com/Unidata/awips2-core/blob/unidata_16.1.4/common/com.raytheon.uf.common.derivparam.python/utility/common_static/base/derivedParameters/functions/Heli.py</p>

<p>So three fields will be passed to Heli.py for the calculation (uWStk, vWStk, RM5), but each is a derived paremeter as well, with its own xml (let’s go deeper). 
uWStk https://github.com/Unidata/awips2/blob/unidata_16.1.5/edexOsgi/com.raytheon.uf.common.dataplugin.grid/utility/common_static/base/derivedParameters/definitions/uStk.xml</p>
<derivedparameter abbreviation="uWStk" name="U Stack" unit="m/s">
    <method name="Union" levels="0-3kmAgl">
    	<field abbreviation="uW" level="0FHAG" />
        <field abbreviation="uW" level="0.5kmAgl" />
        <field abbreviation="uW" level="1kmAgl" />
        <field abbreviation="uW" level="1.5kmAgl" />
        <field abbreviation="uW" level="2kmAgl" />
        <field abbreviation="uW" level="2.5kmAgl" />
        <field abbreviation="uW" level="3kmAgl" />
    </method>
    <method name="Union" levels="C,FHAG">
    	<field abbreviation="uW" />
    </method>
</derivedparameter>

<p>vWStk https://github.com/Unidata/awips2/blob/unidata_16.1.5/edexOsgi/com.raytheon.uf.common.dataplugin.grid/utility/common_static/base/derivedParameters/definitions/vStk.xml</p>
<derivedparameter abbreviation="vWStk" name="V Stack" unit="m/s">
   <method name="Union" levels="0-3kmAgl">
    	<field abbreviation="vW" level="0FHAG" />
        <field abbreviation="vW" level="0.5kmAgl" />
        <field abbreviation="vW" level="1kmAgl" />
        <field abbreviation="vW" level="1.5kmAgl" />
        <field abbreviation="vW" level="2kmAgl" />
        <field abbreviation="vW" level="2.5kmAgl" />
        <field abbreviation="vW" level="3kmAgl" />
    </method>
    <method name="Union" levels="C,FHAG">
    	<field abbreviation="vW" />
    </method>
</derivedparameter>
<p>RM5 https://github.com/Unidata/awips2/blob/unidata_16.1.5/edexOsgi/com.raytheon.uf.common.dataplugin.grid/utility/common_static/base/derivedParameters/definitions/RM5.xml</p>
<derivedparameter name="Bunkers Right-Moving Supercell" unit="m/s" abbreviation="RM5" xmlns:ns2="group">
    <method levels="Layer" name="Add">
        <field level="0-6kmAgl" abbreviation="Wind" />
        <field abbreviation="RMprop" />
    </method>
     <method name="Vector">
        <field abbreviation="USTM" />
        <field abbreviation="VSTM" />
    </method>
</derivedparameter>

<p>Finally, the Python function Heli.py 
https://github.com/Unidata/awips2-core/blob/unidata_16.1.4/common/com.raytheon.uf.common.derivparam.python/utility/common_static/base/derivedParameters/functions/Heli.py</p>

<p>def execute(uStk, vStk, RM5):</p>

<pre><code>umot,vmot = RM5
u1 = uStk[0]
v1 = vStk[0]
u2 = uStk[-1]
v2 = vStk[-1]
# First do our motion, lower bulk shear computation.
hptr = (v2-v1)*umot+(u1-u2)*vmot
for i in range(1, len(uStk)):
    u1 = uStk[i-1]
    v1 = vStk[i-1]
    u2 = uStk[i]
    v2 = vStk[i]
    hptr += u2*v1-u1*v2
return hptr
</code></pre>

<p>from the three files above, we can see that the grid fields used to calculate helicity are uW, vW, USTM, and VSTM, with the last two used by yet another function Vector.py: https://github.com/Unidata/awips2-core/blob/unidata_16.1.4/common/com.raytheon.uf.common.derivparam.python/utility/common_static/base/derivedParameters/functions/Vector.py</p>

<p>Method names like Or, Union, and Alias that don’t map to Python functions are handled by Java in com.raytheon.uf.common.derivparam (see https://github.com/Unidata/awips2-core/tree/unidata_16.1.4/common/com.raytheon.uf.common.derivparam/src/com/raytheon/uf/common/derivparam/tree)</p>

    </article>

    <footer>
  <div>
    <div class="links">
      <a href="https://www.facebook.com/unidata" title="Unidata on Facebook" tabindex="-1"><paper-button><core-icon icon="social:post-facebook"></core-icon>Facebook</paper-button></a>
      <a href="https://twitter.com/intent/follow?screen_name=unidata" data-twitter-follow title="Follow @Unidata on Twitter" tabindex="-1"><paper-button><core-icon icon="social:post-twitter"></core-icon>Twitter</paper-button></a>
      <a href="https://github.com/Unidata/awips2"><paper-button class="github" tabindex="-1"><core-icon icon="social:post-github"></core-icon>GitHub</paper-button></a>
      <a href="https://github.com/Unidata/awips2/issues/new" tabindex="-1"><paper-button><core-icon icon="bug-report"></core-icon>File a bug</paper-button></a>
    </div>

  </div>
</footer>





<script src="/awips2/js/prettify/prettify.js"></script>

<!-- <script src="/awips2/js/bower_components/smoothscroll/smoothscroll.js"></script> -->
<script src="/awips2/js/app.js?20170404"></script>


  </scroll-area>

</main>

</body>
</html>
